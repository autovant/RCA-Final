# ========================================
# ITSM Integration Environment Variables
# ========================================
# Configuration for ServiceNow and Jira ticket integrations
# Copy this file to .env and configure with your credentials

# ========================================
# ServiceNow Configuration
# ========================================

# ServiceNow instance URL (no trailing slash)
SERVICENOW_INSTANCE_URL=https://yourcompany.service-now.com

# Authentication Method 1: Basic Authentication
SERVICENOW_USERNAME=your_servicenow_username
SERVICENOW_PASSWORD=your_servicenow_password

# Authentication Method 2: OAuth 2.0 (optional, uncomment if using OAuth)
# SERVICENOW_CLIENT_ID=your_oauth_client_id
# SERVICENOW_CLIENT_SECRET=your_oauth_client_secret
# SERVICENOW_TOKEN_URL=https://yourcompany.service-now.com/oauth_token.do

# ServiceNow Default Values
# These are used when fields are not explicitly provided in ticket creation
SERVICENOW_DEFAULT_ASSIGNMENT_GROUP=IT Support
SERVICENOW_DEFAULT_CATEGORY=Software
SERVICENOW_DEFAULT_SUBCATEGORY=Application Error
SERVICENOW_DEFAULT_PRIORITY=3
SERVICENOW_DEFAULT_STATE=1
SERVICENOW_DEFAULT_CALLER_ID=system.admin

# Optional: ServiceNow API Configuration
SERVICENOW_API_VERSION=v2
SERVICENOW_API_TIMEOUT=30
SERVICENOW_MAX_RETRIES=3

# ========================================
# Jira Configuration
# ========================================

# Jira instance URL (no trailing slash)
# For Jira Cloud: https://yourcompany.atlassian.net
# For Jira Server/Data Center: https://jira.yourcompany.com
JIRA_BASE_URL=https://yourcompany.atlassian.net

# Authentication for Jira Cloud: Email + API Token
JIRA_EMAIL=your.email@company.com
JIRA_API_TOKEN=your_jira_api_token_here

# Authentication for Jira Server/Data Center: Username + Password
# JIRA_USERNAME=your_jira_username
# JIRA_PASSWORD=your_jira_password

# Jira Default Values
# These are used when fields are not explicitly provided in ticket creation
JIRA_DEFAULT_PROJECT_KEY=PROJ
JIRA_DEFAULT_ISSUE_TYPE=Incident
JIRA_DEFAULT_PRIORITY=Medium
JIRA_DEFAULT_LABELS=rca,automated

# Optional: Jira API Configuration
JIRA_API_VERSION=3
JIRA_API_TIMEOUT=30
JIRA_MAX_RETRIES=3

# ========================================
# Feature Toggle Configuration
# ========================================
# Initial state for ITSM integrations (overrides database on first run)

# Enable/disable ServiceNow integration
TICKET_SERVICENOW_ENABLED=false

# Enable/disable Jira integration
TICKET_JIRA_ENABLED=false

# Enable dual-tracking mode (requires both ServiceNow and Jira to be enabled)
# When enabled, Jira issues will reference their linked ServiceNow incidents
TICKET_DUAL_MODE_ENABLED=false

# ========================================
# Database Configuration (for ticket storage)
# ========================================

# Database URL for storing ticket metadata
# Examples:
# - SQLite: sqlite:///./rca_engine.db
# - PostgreSQL: postgresql://user:password@localhost:5432/rca_engine
# - MySQL: mysql://user:password@localhost:3306/rca_engine
DATABASE_URL=sqlite:///./rca_engine.db

# ========================================
# API Configuration
# ========================================

# Base URL for the RCA Engine API (used by frontend)
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ========================================
# Logging Configuration
# ========================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file location
LOG_FILE=logs/unified_rca_engine.log

# ========================================
# Security Configuration
# ========================================

# Secret key for JWT tokens and session encryption
SECRET_KEY=your-secret-key-here-change-in-production

# Token expiration time (in seconds)
TOKEN_EXPIRE_SECONDS=3600

# ========================================
# Performance & Rate Limiting
# ========================================

# Maximum concurrent ticket creation requests
MAX_CONCURRENT_TICKETS=5

# Rate limit for ticket creation (requests per minute)
TICKET_CREATION_RATE_LIMIT=30

# Ticket status refresh interval (in seconds)
TICKET_REFRESH_INTERVAL=300

# ========================================
# Advanced Configuration
# ========================================

# Enable/disable webhook support for real-time ticket updates
ENABLE_TICKET_WEBHOOKS=false

# Webhook secret for validating incoming webhook requests
TICKET_WEBHOOK_SECRET=your-webhook-secret-here

# Enable background task processing for ticket operations
ENABLE_BACKGROUND_TASKS=true

# Background task worker count
BACKGROUND_WORKER_COUNT=4

# ========================================
# Development/Testing Configuration
# ========================================

# Enable debug mode (DO NOT use in production)
DEBUG=false

# Default to dry-run mode for all ticket creation (useful for testing)
DEFAULT_DRY_RUN=false

# Mock external API calls (for testing without real credentials)
MOCK_EXTERNAL_APIS=false

# ========================================
# Notification Configuration (Optional)
# ========================================

# Email notifications for ticket creation
ENABLE_EMAIL_NOTIFICATIONS=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USERNAME=your_email@company.com
EMAIL_SMTP_PASSWORD=your_email_password
EMAIL_FROM_ADDRESS=noreply@company.com

# Slack notifications for ticket creation
ENABLE_SLACK_NOTIFICATIONS=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
