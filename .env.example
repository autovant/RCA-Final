# RCA Engine Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# SECURITY SETTINGS - CHANGE THESE IN PRODUCTION
# =============================================================================

# JWT Configuration (generate strong random keys)
JWT_SECRET_KEY=your-super-secret-jwt-key-at-least-32-characters-long
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER=rca-engine
JWT_AUDIENCE=rca-users

# Database Security
POSTGRES_PASSWORD=your-super-secure-postgres-password
POSTGRES_USER=rca_user
POSTGRES_DB=rca_engine

# Grafana Admin Password
GRAFANA_PASSWORD=your-grafana-admin-password

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================

ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# DATABASE SETTINGS
# =============================================================================

POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_POOL_PRE_PING=true

# Vector Settings
VECTOR_DIMENSION=384

# =============================================================================
# REDIS SETTINGS (Optional)
# =============================================================================

REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SSL=false

# =============================================================================
# LLM PROVIDER SETTINGS
# =============================================================================

DEFAULT_PROVIDER=ollama
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=llama2
OLLAMA_TIMEOUT=300
OLLAMA_MAX_TOKENS=4096

# Embedding Settings
EMBEDDING_PROVIDER=ollama
EMBEDDING_MODEL=nomic-embed-text
EMBEDDING_DIMENSION=384

# Rate Limiting
LLM_RATE_LIMIT_REQUESTS=100
LLM_RATE_LIMIT_PERIOD=3600

# =============================================================================
# FILE PROCESSING SETTINGS
# =============================================================================

MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES=log,txt,json,xml,csv,yaml,yml

# Storage Directories
UPLOAD_DIR=uploads
REPORTS_DIR=reports
WATCH_FOLDER=watch-folder

# Security
ENABLE_VIRUS_SCAN=false
ENABLE_FILE_VALIDATION=true

# Processing
CHUNK_SIZE=1048576  # 1MB in bytes
MAX_CONCURRENT_UPLOADS=10

# =============================================================================
# WORKER SETTINGS
# =============================================================================

WORKER_POLL_INTERVAL=5
WORKER_MAX_CONCURRENT_JOBS=5
WORKER_TIMEOUT=1800  # 30 minutes
WORKER_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=60  # 1 minute

# =============================================================================
# MONITORING SETTINGS
# =============================================================================

METRICS_ENABLED=true
METRICS_PORT=8001

# =============================================================================
# CORS SETTINGS
# =============================================================================

CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# =============================================================================
# CSRF SETTINGS
# =============================================================================

CSRF_TOKEN_LENGTH=32
CSRF_TOKEN_EXPIRE_MINUTES=60
CSRF_SAME_SITE=strict
CSRF_SECURE=false  # Set to true in production with HTTPS
CSRF_HTTP_ONLY=true

# =============================================================================
# RATE LIMITING SETTINGS
# =============================================================================

RATE_LIMITING_ENABLED=true
RATE_LIMIT_DEFAULT=100/hour
RATE_LIMIT_AUTH=1000/hour
RATE_LIMIT_BURST=10/minute

# =============================================================================
# UI SETTINGS
# =============================================================================

NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
NODE_ENV=development

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Enable hot reload for development
HOT_RELOAD=true

# Enable detailed error messages
DETAILED_ERRORS=true

# Enable SQL query logging
SQL_ECHO=false

# =============================================================================
# PRODUCTION SETTINGS (Uncomment for production)
# =============================================================================

# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=WARNING
# CSRF_SECURE=true
# RATE_LIMITING_ENABLED=true
# ENABLE_VIRUS_SCAN=true
# SQL_ECHO=false